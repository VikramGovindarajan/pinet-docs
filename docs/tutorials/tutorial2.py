#Greyvenstein (1994) example 3 compressed air network steady state

#circuit inputs
circuit1 = comp.Circuit("circuit1")
circuit1.assign_fluid("Air","thiravam",incomp=True) #use CoolProp later pending

#node inputs
node1 = circuit1.add_node("node1")
node2 = circuit1.add_node("node2")
node3 = circuit1.add_node("node3")
node4 = circuit1.add_node("node4")
node5 = circuit1.add_node("node5")
node6 = circuit1.add_node("node6")
node7 = circuit1.add_node("node7")
node8 = circuit1.add_node("node8")
node9 = circuit1.add_node("node9")
node10 = circuit1.add_node("node10")
node11 = circuit1.add_node("node11")
node12 = circuit1.add_node("node12")
node13 = circuit1.add_node("node13")
node14 = circuit1.add_node("node14")
node15 = circuit1.add_node("node15")
node16 = circuit1.add_node("node16")
node17 = circuit1.add_node("node17")
node18 = circuit1.add_node("node18")
node19 = circuit1.add_node("node19")
node20 = circuit1.add_node("node20")
node21 = circuit1.add_node("node21")
node22 = circuit1.add_node("node22")
node23 = circuit1.add_node("node23")
node24 = circuit1.add_node("node24")
node25 = circuit1.add_node("node25")
node26 = circuit1.add_node("node26")
node27 = circuit1.add_node("node27")
node28 = circuit1.add_node("node28")
node29 = circuit1.add_node("node29")

#pipe inputs
pipe1 =circuit1.add_pipe("pipe1", 0.019  ,200,"node1" , "node2" ,  0.03,30.,1)
pipe2 =circuit1.add_pipe("pipe2", 0.01588,400,"node2" , "node3" ,  0.03,30.,1)
pipe3 =circuit1.add_pipe("pipe3", 0.01588,400,"node3" , "node5" ,  0.03,30.,1)
pipe4 =circuit1.add_pipe("pipe4", 0.010  ,100,"node5" , "node6" ,  0.03,30.,1)
pipe5 =circuit1.add_pipe("pipe5", 0.010  ,100,"node6" , "node7" ,  0.03,30.,1)
pipe6 =circuit1.add_pipe("pipe6", 0.010  ,100,"node6" , "node8" ,  0.03,30.,1)
pipe7 =circuit1.add_pipe("pipe7", 0.010  ,100,"node8" , "node9" ,  0.03,30.,1)
pipe8 =circuit1.add_pipe("pipe8", 0.010  ,100,"node8" , "node10" , 0.03,30.,1)
pipe9 =circuit1.add_pipe("pipe9", 0.01588,400,"node5" , "node11" , 0.03,30.,1)
pipe10=circuit1.add_pipe("pipe10",0.010  ,100,"node11" , "node12", 0.03,30.,1)
pipe11=circuit1.add_pipe("pipe11",0.01588,400,"node11", "node13",  0.03,30.,1)
pipe12=circuit1.add_pipe("pipe12",0.019  ,200,"node14", "node13",  0.03,30.,1)
pipe13=circuit1.add_pipe("pipe13",0.01588,400,"node13", "node15" , 0.03,30.,1)
pipe14=circuit1.add_pipe("pipe14",0.010  ,100,"node15", "node16" , 0.03,30.,1)
pipe15=circuit1.add_pipe("pipe15",0.01588,400,"node17" , "node15", 0.03,30.,1)
pipe16=circuit1.add_pipe("pipe16",0.010  ,100,"node17", "node18" , 0.03,30.,1)
pipe17=circuit1.add_pipe("pipe17",0.010  ,100,"node18" , "node19", 0.03,30.,1)
pipe18=circuit1.add_pipe("pipe18",0.010  ,100,"node18", "node20" , 0.03,30.,1)
pipe19=circuit1.add_pipe("pipe19",0.01588,400,"node21" , "node17", 0.03,30.,1)
pipe20=circuit1.add_pipe("pipe20",0.010  ,100,"node21" , "node22", 0.03,30.,1)
pipe21=circuit1.add_pipe("pipe21",0.01588,400,"node23", "node21",  0.03,30.,1)
pipe22=circuit1.add_pipe("pipe22",0.010  ,100,"node23", "node24",  0.03,30.,1)
pipe23=circuit1.add_pipe("pipe23",0.010  ,100,"node24", "node25" , 0.03,30.,1)
pipe24=circuit1.add_pipe("pipe24",0.01588,400,"node26", "node23" , 0.03,30.,1)
pipe25=circuit1.add_pipe("pipe25",0.010  ,100,"node26" , "node27", 0.03,30.,1)
pipe26=circuit1.add_pipe("pipe26",0.01588,400,"node2", "node26" ,  0.03,30.,1)
pipe27=circuit1.add_pipe("pipe27",0.010  ,100,"node3" , "node4",   0.03,30.,1)
pipe28=circuit1.add_pipe("pipe28",0.010  ,100,"node5", "node28" ,  0.03,30.,1)
pipe29=circuit1.add_pipe("pipe29",0.010  ,100,"node24" , "node29", 0.03,30.,1)

#boundary conditions
bc1 = comp.BC("bc1","node1",'P',6.E5)
bc2 = comp.BC("bc2","node4",'P',3.E5)
bc3 = comp.BC("bc3","node7",'P',3.E5)
bc4 = comp.BC("bc4","node9",'P',3.E5)
bc5 = comp.BC("bc5","node10",'P',3.E5)
bc6 = comp.BC("bc6","node12",'P',3.E5)
bc7 = comp.BC("bc7","node14",'P',6.E5)
bc8 = comp.BC("bc8","node16",'P',3.E5)
bc9 = comp.BC("bc9","node19",'P',3.E5)
bc10 = comp.BC("bc10","node20",'P',3.E5)
bc11 = comp.BC("bc11","node22",'P',3.E5)
bc12 = comp.BC("bc12","node25",'P',3.E5)
bc13 = comp.BC("bc13","node27",'P',3.E5)
bc14 = comp.BC("bc14","node28",'P',3.E5)
bc15 = comp.BC("bc15","node29",'P',3.E5)

from PINET import solver_settings

solver_settings.T_ambient = 288.

solver_settings.temp_solve = False
